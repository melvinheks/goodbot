{
  "name": "botkit",
  "version": "0.5.2",
  "description": "Building blocks for Building Bots",
  "main": "lib/Botkit.js",
  "dependencies": {
    "async": "^2.0.0-rc.5",
    "back": "^1.0.1",
    "body-parser": "^1.14.2",
    "botbuilder": "^3.2.3",
    "botkit-studio-sdk": "^1.0.0",
    "ciscospark": "^0.7.31",
    "clone": "2.0.0",
    "command-line-args": "^3.0.0",
    "crypto": "0.0.3",
    "express": "^4.13.3",
    "https-proxy-agent": "^5.0.0",
    "jfs": "^0.2.6",
    "localtunnel": "^1.8.1",
    "md5": "^2.1.0",
    "mustache": "^2.2.1",
    "promise": "^7.1.1",
    "randomstring": "^1.1.5",
    "request": "^2.67.0",
    "twilio": "^2.9.1",
    "url": "^0.11.0",
    "ware": "^1.3.0",
    "ws": "^1.1.1"
  },
  "devDependencies": {
    "jscs": "^2.7.0",
    "mocha": "^2.4.5",
    "should": "^8.0.2",
    "should-sinon": "0.0.5",
    "sinon": "^1.17.7",
    "winston": "^2.1.1"
  },
  "scripts": {
    "pretest": "jscs ./lib/",
    "test": "mocha tests/*.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/howdyai/botkit.git"
  },
  "bugs": {
    "url": "https://github.com/howdyai/botkit/issues"
  },
  "homepage": "https://botkit.ai",
  "keywords": [
    "bots",
    "chatbots",
    "slack",
    "cisco spark",
    "facebook messenger",
    "twilio ipm",
    "microsoft bot framework"
  ],
  "author": {
    "name": "ben@howdy.ai"
  },
  "license": "MIT",
  "readme": "# Botkit and Microsoft Bot Framework\n\nBotkit is designed to ease the process of designing and running useful, creative bots that live inside [Slack](http://slack.com), [Facebook Messenger](http://facebook.com), [Twilio IP Messaging](https://www.twilio.com/docs/api/ip-messaging), [Microsoft Bot Framework](https://botframework.com), \nand other messaging platforms.\n\nThe [Microsoft Bot Framework](https://botframework.com) makes it easy to create a single bot that can run across a variety of messaging channels including [Skype](https://skype.com), [Group.me](https://groupme.com), [Facebook Messenger](https://messenger.com), [Slack](https://slack.com), \n[Telegram](https://telegram.org/), [Kik](https://www.kik.com/), [SMS](https://www.twilio.com/), and [email](https://microsoft.office.com).\n\nBuilt in to [Botkit](https://howdy.ai/botkit/) are a comprehensive set of features and tools to deal with any of the platforms supported by the [Microsoft Bot Framework](https://botframework.com), allowing developers to build interactive bots and applications that send and receive messages \njust like real humans.\n\nThis document covers the Bot Framework implementation details only. [Start here](readme.md) if you want to learn about to develop with Botkit.\n\nTable of Contents\n\n* [Getting Started](#getting-started)\n* [Bot Framework Specific Events](#bot-framework-specific-events)\n* [Working with the Bot Framework](#working-with-the-bot-framework)\n* [Sending Cards and Attachments](#sending-cards-and-attachments)\n* [Typing Indicator](#typing-indicator)\n\n## Getting Started\n\n1) Install Botkit [more info here](readme.md#installation)\n\n2) Register a developer account with the Bot Framework [Developer Portal](https://dev.botframework.com/) and follow [this guide](https://docs.botframework.com/en-us/csharp/builder/sdkreference/gettingstarted.html#registering) to register your first bot with the Bot Framework. \n\n* You'll be asked to provide an endpoint for your bot during the registration process which you should set to \"https://<HOST>/botframework/receive\". If your using a service like [ngrok](https://ngrok.com/) to run your bot locally you should set the \"<HOST>\" portion of your endpoint to \n  be the hostname assigned by ngrok.\n* Write down the *App ID* and *App Password* assigned to your new bot as you'll need them when you run your bot.\n\n3) By default your bot will be configured to support the Skype channel but you'll need to add it as a contact on Skype in order to test it. You can do that from the developer portal by clicking the \"Add to Skype\" button in your bots profile page.\n\n4) Run the example bot using the App ID & Password you were assigned. If you are _not_ running your bot at a public, SSL-enabled internet address, use the --lt option and update your bots endpoint in the developer portal to use the URL assigned to your bot.\n\n```\napp_id=<MY_APP_ID> app_password=<MY_APP_PASSWORD> node botframework_bot.js [--lt [--ltsubdomain CUSTOM_SUBDOMAIN]]\n```    \n\n5) Your bot should be online! Within Skype, find the bot in your contacts list, and send it a message.\n\nTry:\n  * who are you?\n  * call me Bob\n  * shutdown\n\n### Things to note\n\nSince the Bot Framework delivers messages via web hook, your application must be available at a public internet address.  Additionally, the Bot Framework requires this address to use SSL.  Luckily, you can use [LocalTunnel](https://localtunnel.me/) to make a process running locally or in your dev environment available in a Bot Framework friendly way.\n\nWhen you are ready to go live, consider [LetsEncrypt.org](http://letsencrypt.org), a _free_ SSL Certificate Signing Authority which can be used to secure your website very quickly.\n\n## Bot Framework Specific Events\n\nOnce connected to the Bot Framework, bots receive a constant stream of events.\n\nNormal messages will be sent to your bot using the `message_received` event.  In addition, several other events may fire, depending on the channel your bot is configured to support.\n\n| Event | Description\n|--- |---\n| message_received | A message was received by the bot. Passed an [IMessage](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.imessage.html) object.\n| conversationUpdate | Your bot was added to a conversation or other conversation metadata changed. Passed an [IConversationUpdate](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.iconversationupdate.html) object.\n| contactRelationUpdate | The bot was added to or removed from a user's contact list. Passed an [IContactRelationUpdate](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.icontactrelationupdate.html) object.\n| typing | The user or bot on the other end of the conversation is typing. Passed an [IEvent](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.ievent.html) object.\n\nIn addition to the event specific fields, all incoming events will contain both `user` and `channel` fields which can be used for things like storage keys. Every event also has an [address](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.ievent.html#address) field. The `user` field is just a copy of the events `address.user.id` field and the `channel` field is a copy of the events `address.conversationId.id` field.\n\nOther notable fields for incoming messages are the [text](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.imessage.html#text) field which contains the text of the incoming message, the [attachments](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.imessage.html#attachments) field which would contain an array of any images sent to the bot by the user, the [source](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.imessage.html#source) field which identifies the type of chat platform (facebook, skype, sms, etc.) that the bot is communicating over, and the [sourceEvent](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.imessage.html#sourceevent) field containing the original event/message received from the chat platform.\n\n## Working with the Bot Framework\n\nBotkit receives messages from the Bot Framework using webhooks, and sends messages to the Bot Framework using APIs. This means that your bot application must present a web server that is publicly addressable. Everything you need to get started is already included in Botkit.\n\nTo connect your bot to the Bot Framework follow the step by step guide outlined in [Getting Started](#getting-started).\n\nHere is the complete code for a basic Bot Framework bot:\n\n```javascript\nvar Botkit = require('botkit');\nvar controller = Botkit.botframeworkbot({\n});\n\nvar bot = controller.spawn({\n        appId: process.env.app_id,\n        appPassword: process.env.app_password\n});\n\n// if you are already using Express, you can use your own server instance...\n// see \"Use BotKit with an Express web server\"\ncontroller.setupWebserver(process.env.port,function(err,webserver) {\n  controller.createWebhookEndpoints(controller.webserver, bot, function() {\n      console.log('This bot is online!!!');\n  });\n});\n\n// user said hello\ncontroller.hears(['hello'], 'message_received', function(bot, message) {\n\n    bot.reply(message, 'Hey there.');\n\n});\n\ncontroller.hears(['cookies'], 'message_received', function(bot, message) {\n\n    bot.startConversation(message, function(err, convo) {\n\n        convo.say('Did someone say cookies!?!!');\n        convo.ask('What is your favorite type of cookie?', function(response, convo) {\n            convo.say('Golly, I love ' + response.text + ' too!!!');\n            convo.next();\n        });\n    });\n});\n```\n#### Botkit.botframeworkbot()\n| Argument | Description\n|---  |---\n| settings | Options used to configure the bot.  Supports fields from [IChatConnectorSettings](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.ichatconnectorsettings.html).\n\nCreates a new instance of the bots controller.  The controller will create a new [ChatConnector](https://docs.botframework.com/en-us/node/builder/chat-reference/classes/_botbuilder_d_.chatconnector.html) so any options needed to configure the chat connector should be passed in via the `settings` argument.\n\nGenerally speaking your bot needs to be configured with both an [appId](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.ichatconnectorsettings.html#appid) and [appPassword](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.ichatconnectorsettings.html#apppassword). You can leave these blank but then your bot can only be called by the [Bot Framework Emulator](https://docs.botframework.com/en-us/tools/bot-framework-emulator/#navtitle).\n\n#### controller.setupWebserver()\n| Argument | Description\n|---  |---\n| port | port for webserver\n| callback | callback function\n\nSetup an [Express webserver](http://expressjs.com/en/index.html) for\nuse with `createWebhookEndpoints()`\n\nIf you need more than a simple webserver to receive webhooks,\nyou should by all means create your own Express webserver! Here is a [boilerplate demo](https://github.com/mvaragnat/botkit-messenger-express-demo).\n\nThe callback function receives the Express object as a parameter,\nwhich may be used to add further web server routes.\n\n#### controller.createWebhookEndpoints()\n\nThis function configures the route `https://_your_server_/botframework/receive`\nto receive webhooks from the Bot Framework.\n\nThis url should be used when configuring Facebook.\n\n## Sending Cards and Attachments\n\nOne of the more complicated aspects of building a bot that supports multiple chat platforms is dealing with all the various schemes these platforms support.  To help ease this development burden, the Bot Framework supports a cross platform card & attachment schema which lets you use a single JSON schema to express cards and attachments for any platform.  The Bot Frameworks channel adapters will do their best to render a card on a given platform which sometimes result in a card being broken up into multiple messages.\n\n#### Sending Images & Files\n\nThe frameworks [attachment schema](https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.iattachment.html) lets you send a single image/file using `contentType` and `contentUrl` fields:\n \n```javascript\n    bot.reply(message, {\n        attachments: [\n            {\n                contentType: 'image/png',\n                contentUrl: 'https://upload.wikimedia.org/wikipedia/en/a/a6/Bender_Rodriguez.png',\n                name: 'Bender_Rodriguez.png'\n            }\n        ]\n    });\n```\n\n#### Sending Cards\n\nRich cards can be expressed as attachments by changing the `contentType` and using the `content` field to pass a JSON object defining the card:\n\n```javascript\n    bot.reply(message, {\n        attachments: [\n            {\n                contentType: 'application/vnd.microsoft.card.hero',\n                content: {\n                    title: \"I'm a hero card\",\n                    subtitle: \"Pig Latin Wikipedia Page\",\n                    images: [\n                        { url: \"https://<ImageUrl1>\" },\n                        { url: \"https://<ImageUrl2>\" }\n                    ],\n                    buttons: [\n                        {\n                            type: \"openUrl\",\n                            title: \"WikiPedia Page\",\n                            value: \"https://en.wikipedia.org/wiki/Pig_Latin\"\n                        }\n                    ]\n                }\n            }\n        ]\n    });\n```\n\nThe full list of supported card types and relevant schema can be found [here](https://docs.botframework.com/en-us/csharp/builder/sdkreference/attachments.html)\n\n#### Using the Platforms Native Schema\n\nThere may be times where the Bot Frameworks cross platform attachment schema doesn’t cover your needs. For instance, you may be trying to send a card type not directly supported by the framework.  In those cases you can pass a message using the platforms native schema to the `sourceEvent` field on the message.  Examples of this can be found [here](https://docs.botframework.com/en-us/csharp/builder/sdkreference/channels.html) (note: you should use `sourceEvent` instead of `channelData` and you don’t need to worry about the from & to fields, these will be populated for you when you call `bot.reply()`.) \n\n## Typing Indicator\n\nYou can easily turn on the typing indicator on platforms that support that behaviour by sending an empty message of type \"typing\":\n\n```javascript\n    bot.reply(message, { type: \"typing\" });\n```\n",
  "readmeFilename": "readme-botframework.md",
  "_id": "botkit@0.5.2",
  "_from": "botkit@"
}
